<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.0.0/dist/tailwind.min.css">
<div class="absolute top-1 left-1">
  <img class="w-60 h-46 filter invert" src="Assets/servodox.png" alt="Your Company">
</div>

<!-- Header Section -->
<h3 class="text-center mb-24 mt-24 text-4xl font-extrabold text-gray-900">Generate Ticket</h3>
<div class="container mt-4 animate-container px-4 py-6 bg-white shadow-lg rounded-lg">


  <div *ngIf="isLoading" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
    <!-- Advanced Glowing Spinner -->
    <div class="relative w-24 h-24">
      <div class="absolute w-24 h-24 border-4 border-t-transparent border-b-transparent border-l-4 border-r-4 border-gradient-to-r from-teal-600 via-indigo-600 to-purple-600 rounded-full animate-spin animation-delay-2000"></div>
    </div>
  </div>
  



  <form [formGroup]="policyForm" (ngSubmit)="onSubmit()">
    <div class="form-row animate-section">
      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('ticketNumber')}">
        <label for="ticketNumber" class="block text-sm font-medium text-gray-700">Client Ticket Number <span class="text-red-600">*</span></label>
        <input type="text" id="ticketNumber" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="ticketNumber" placeholder="Enter Ticket Number" />
        <div *ngIf="isInvalid('ticketNumber')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('clientName')}">
        <label for="clientName" class="block text-sm font-medium text-gray-700">Client Name <span class="text-red-600">*</span></label>
        <select id="clientName" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="clientName">
          <option value="">Select Case Status</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>
        <div *ngIf="isInvalid('clientName')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('ticketStatus')}">
        <label for="ticketStatus" class="block text-sm font-medium text-gray-700">Ticket Status <span class="text-red-600">*</span></label>
        <input type="text" id="ticketStatus" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="ticketStatus" value="OPEN" readonly />
        <div *ngIf="isInvalid('ticketStatus')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('caseRaiseDate')}">
        <label for="caseRaiseDate" class="block text-sm font-medium text-gray-700">Case Raise Date & Time <span class="text-red-600">*</span></label>
        <input type="datetime-local" id="caseRaiseDate" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="caseRaiseDate" placeholder="Case Raise Date" />
        <div *ngIf="isInvalid('caseRaiseDate')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('ackDate')}">
        <label for="ackDate" class="block text-sm font-medium text-gray-700">Acknowledgement Date & Time <span class="text-red-600">*</span></label>
        <input type="datetime-local" id="ackDate" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="ackDate" placeholder="Enter Acknowledgement Date" />
        <div *ngIf="isInvalid('ackDate')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('reportedBy')}">
        <label for="reportedBy" class="block text-sm font-medium text-gray-700">Reported By <span class="text-red-600">*</span></label>
        <input type="text" id="reportedBy" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="reportedBy" placeholder="Enter Reported By" />
        <div *ngIf="isInvalid('reportedBy')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('clientEmail')}">
        <label for="clientEmail" class="block text-sm font-medium text-gray-700">Customer Email <span class="text-red-600">*</span></label>
        <input type="text" id="clientEmail" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="clientEmail" placeholder="Enter Client Email" />
        <div *ngIf="isInvalid('clientEmail')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('clientPhone')}">
        <label for="clientPhone" class="block text-sm font-medium text-gray-700">Customer Phone Number <span class="text-red-600">*</span></label>
        <input type="text" id="clientPhone" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="clientPhone" placeholder="Enter Client Phone Number" />
        <div *ngIf="isInvalid('clientPhone')" class="error-message text-red-500 text-sm mt-1">This field is required and must contain only 10-digits.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('projectReference')}">
        <label for="projectReference" class="block text-sm font-medium text-gray-700">Project Reference <span class="text-red-600">*</span></label>
        <select id="projectReference" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="projectReference">
          <option value="">Select Project Reference</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>
        <div *ngIf="isInvalid('projectReference')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('deviceModel')}">
        <label for="deviceModel" class="block text-sm font-medium text-gray-700">Device/Server Model <span class="text-red-600">*</span></label>
        <select id="deviceModel" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="deviceModel">
          <option value="">Select Device Model</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>
        <div *ngIf="isInvalid('deviceModel')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('deviceSl')}">
        <label for="deviceSl" class="block text-sm font-medium text-gray-700">Device Serial Number <span class="text-red-600">*</span></label>
        <input type="text" id="deviceSl" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="deviceSl" placeholder="Enter Device SL" />
        <div *ngIf="isInvalid('deviceSl')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-6" [ngClass]="{'has-error': isInvalid('deviceDescription')}">
        <label for="deviceDescription" class="block text-sm font-medium text-gray-700">Device Description <span class="text-red-600">*</span></label>
        <input type="text" id="deviceDescription" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="deviceDescription" placeholder="Enter Device Description" />
        <div *ngIf="isInvalid('deviceDescription')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('lconName')}">
        <label for="lconName" class="block text-sm font-medium text-gray-700">LCON Name <span class="text-red-600">*</span></label>
        <input type="text" id="lconName" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="lconName" placeholder="Enter LCON Name" />
        <div *ngIf="isInvalid('lconName')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>

      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('siteContact')}">
        <label for="siteContact" class="block text-sm font-medium text-gray-700">LCON Contact Number <span class="text-red-600">*</span></label>
        <input type="text" id="siteContact" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="siteContact" placeholder="Enter Site Contact Number" />
        <div *ngIf="isInvalid('siteContact')" class="error-message text-red-500 text-sm mt-1">This field is required and must contain only 10-digits.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-4" [ngClass]="{'has-error': isInvalid('siteAddress')}">
        <label for="siteAddress" class="block text-sm font-medium text-gray-700">Site Address <span class="text-red-600">*</span></label>
        <input type="text" id="siteAddress" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="siteAddress" placeholder="Enter Site Address" />
        <div *ngIf="isInvalid('siteAddress')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <div class="form-row animate-section">
      <div class="form-group col-md-8" [ngClass]="{'has-error': isInvalid('caseDescription')}">
        <label for="caseDescription" class="block text-sm font-medium text-gray-700">Case/Problem Description <span class="text-red-600">*</span></label>
        <input type="text" id="caseDescription" class="form-control mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" formControlName="caseDescription" placeholder="Enter Case Description" />
        <div *ngIf="isInvalid('caseDescription')" class="error-message text-red-500 text-sm mt-1">This field is required.</div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary mt-2 next-button bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">Submit</button>
  </form>
</div>
